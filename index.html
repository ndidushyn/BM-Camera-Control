<!DOCTYPE html>
    <link rel="stylesheet" href="css/presets.css">
    <link rel="stylesheet" href="css/midi.css">
    <link rel="stylesheet" href="css/midi-custom.css">
    <link rel="stylesheet" href="css/toast.css">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Blackmagic Camera Control Center</title>
    
    <!-- PWA Meta Tags -->
    <meta name="description" content="Professional camera control interface for Blackmagic cameras with MIDI support">
    <meta name="keywords" content="blackmagic, camera, control, midi, professional, video, production">
    <meta name="author" content="BM Camera Control">
    <meta name="theme-color" content="#2563eb">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="BM Camera Control">
    <meta name="application-name" content="BM Camera Control">
    <meta name="msapplication-TileColor" content="#2563eb">
    <meta name="msapplication-navbutton-color" content="#2563eb">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" sizes="152x152" href="icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="192x192" href="icons/icon-192x192.png">
    
    <!-- Favicons -->
    <link rel="icon" type="image/png" sizes="32x32" href="icons/icon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/icon-16x16.png">
    
    <!-- Modular CSS Files -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" href="css/navigation.css">
    <link rel="stylesheet" href="css/buttons.css">
    <link rel="stylesheet" href="css/forms.css">
    <link rel="stylesheet" href="css/panels.css">
    <link rel="stylesheet" href="css/camera-controls.css">
    <link rel="stylesheet" href="css/color-controls.css">
    <link rel="stylesheet" href="css/presets.css">
    <link rel="stylesheet" href="css/midi.css">
    <link rel="stylesheet" href="css/toast.css">
    <link rel="stylesheet" href="css/responsive.css">
    
    <!-- Fallback icon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üé•</text></svg>">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header compact">
            <div class="header-content">
                <h1><span class="camera-icon">üé•</span> Blackmagic Camera Control</h1>
                <div class="connection-indicator" id="connection-indicator">
                    <span class="status-dot offline" id="status-dot"></span>
                    <span id="connection-text">–ù–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ</span>
                </div>
            </div>
        </header>

        <!-- Unified Camera Connection & Info Panel -->
        <div class="camera-panel unified">
            <div class="panel-main">
                <div class="connection-section">
                    <div class="connection-input">
                        <label for="camera-ip">üîå –ö–∞–º–µ—Ä–∞:</label>
                        <input type="text" id="camera-ip" value="micro-studio-camera-4k-g2-1.local" 
                               placeholder="IP –∞–±–æ hostname">
                    </div>
                    <div class="connection-buttons">
                        <button type="button" id="connect-btn" class="btn primary compact">–ü—ñ–¥–∫–ª—é—á–∏—Ç–∏</button>
                        <button type="button" id="disconnect-btn" class="btn danger compact" disabled>–í—ñ–¥–∫–ª—é—á–∏—Ç–∏</button>
                        <button type="button" id="refresh-status-btn" class="btn secondary compact" disabled>üîÑ</button>
                    </div>
                </div>
                
                <div class="camera-info-section" id="camera-info-section" style="display: none;">
                    <div class="info-divider"></div>
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="info-icon">üì∑</span>
                            <span class="info-label">ID:</span>
                            <span class="info-value" id="camera-id">‚Äî</span>
                        </div>
                        <div class="info-item">
                            <span class="info-icon">üé¨</span>
                            <span class="info-label">–ö–æ–¥–µ–∫:</span>
                            <span class="info-value" id="camera-codec">‚Äî</span>
                        </div>
                        <div class="info-item">
                            <span class="info-icon">‚ö°</span>
                            <span class="info-label">FPS:</span>
                            <span class="info-value" id="camera-framerate">‚Äî</span>
                        </div>
                        <div class="info-item">
                            <span class="info-icon">üìê</span>
                            <span class="info-label">–†–æ–∑–¥—ñ–ª—å–Ω—ñ—Å—Ç—å:</span>
                            <span class="info-value" id="camera-record-resolution">‚Äî</span>
                        </div>
                        <div class="info-item">
                            <span class="info-icon">üéØ</span>
                            <span class="info-label">Off Speed:</span>
                            <span class="info-value" id="camera-off-speed">‚Äî</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation Tabs -->
        <div class="navigation-tabs">
            <button type="button" class="tab-btn active" data-tab="camera">üé¨ –ö–µ—Ä—É–≤–∞–Ω–Ω—è –∫–∞–º–µ—Ä–æ—é</button>
            <!-- <button type="button" class="tab-btn" data-tab="color">üé® –ö–µ—Ä—É–≤–∞–Ω–Ω—è –∫–æ–ª—å–æ—Ä–æ–º</button> -->
            <!-- <button type="button" class="tab-btn" data-tab="presets">üíæ –ü—Ä–µ—Å–µ—Ç–∏</button> -->
            <button type="button" class="tab-btn" data-tab="midi">üéπ MIDI –ö–æ–Ω—Ç—Ä–æ–ª—å</button>
        </div>

        <!-- Camera Controls Tab -->
        <div id="camera-tab" class="tab-content active">
        <!-- Main Controls Grid -->
        <div class="controls-grid">
            <!-- Video Settings -->
            <div class="control-panel">
                
                
                <!-- Gain Control -->
                <div class="control-section">
                    <h3>üìà Gain Control</h3>
                    <div class="current-value">
                        <span>–ü–æ—Ç–æ—á–Ω–∏–π gain: </span>
                        <span class="value-display" id="current-gain">‚ùì</span>
                    </div>
                    <div class="gain-presets">
                        <button type="button" class="gain-btn" data-gain="0" disabled>0 dB</button>
                        <button type="button" class="gain-btn" data-gain="2" disabled>2 dB</button>
                        <button type="button" class="gain-btn" data-gain="4" disabled>4 dB</button>
                        <button type="button" class="gain-btn" data-gain="6" disabled>6 dB</button>
                        <button type="button" class="gain-btn" data-gain="8" disabled>8 dB</button>
                        <button type="button" class="gain-btn" data-gain="10" disabled>10 dB</button>
                        <button type="button" class="gain-btn" data-gain="12" disabled>12 dB</button>
                        <button type="button" class="gain-btn" data-gain="14" disabled>14 dB</button>
                        <button type="button" class="gain-btn" data-gain="16" disabled>16 dB</button>
                        <button type="button" class="gain-btn" data-gain="18" disabled>18 dB</button>
                        <button type="button" class="gain-btn" data-gain="20" disabled>20 dB</button>
                        <button type="button" class="gain-btn" data-gain="22" disabled>22 dB</button>
                        <button type="button" class="gain-btn" data-gain="24" disabled>24 dB</button>
                        <button type="button" class="gain-btn" data-gain="26" disabled>26 dB</button>
                    </div>
                    <div class="custom-control">
                        <input type="number" id="custom-gain" min="0" max="26" step="1" value="0" disabled>
                        <button type="button" id="set-custom-gain-btn" class="btn secondary" disabled>–í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏</button>
                    </div>
                </div>

                <!-- Shutter -->
                <div class="control-section">
                    <h3>‚è±Ô∏è Shutter Control</h3>
                    <div class="current-value">
                        <span>–ü–æ—Ç–æ—á–Ω–∞ –≤–∏—Ç—Ä–∏–º–∫–∞: </span>
                        <span class="value-display" id="current-shutter">‚ùì</span>
                    </div>
                    <div class="shutter-presets">
                        <button type="button" class="shutter-btn" data-shutter="50" disabled>1/50</button>
                        <button type="button" class="shutter-btn" data-shutter="60" disabled>1/60</button>
                        <button type="button" class="shutter-btn" data-shutter="120" disabled>1/120</button>
                        <button type="button" class="shutter-btn" data-shutter="250" disabled>1/250</button>
                        <button type="button" class="shutter-btn" data-shutter="500" disabled>1/500</button>
                        <button type="button" class="shutter-btn" data-shutter="1000" disabled>1/1000</button>
                    </div>
                    <div class="custom-control">
                        <input type="number" id="custom-shutter" min="24" max="2000" step="1" value="50" disabled>
                        <button type="button" id="set-custom-shutter-btn" class="btn secondary" disabled>–í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏</button>
                    </div>
                </div>


            </div>

            <!-- Color Settings -->
            <div class="control-panel">

                <!-- White Balance -->
                <div class="control-section">
                    <h3>‚ö™ White Balance</h3>
                    <div class="current-value">
                        <span>–ü–æ—Ç–æ—á–Ω–∏–π WB: </span>
                        <span class="value-display" id="current-wb">‚ùì</span>
                    </div>
                    
                    <!-- WB Slider Control -->
                    <div class="wb-slider-control">
                        <div class="slider-container">
                            <label for="wb-slider">–ë–∞–ª–∞–Ω—Å –±—ñ–ª–æ–≥–æ:</label>
                            <input type="range" id="wb-slider" min="2500" max="10000" step="50" value="5600" disabled>
                            <div class="slider-value-display">
                                <span id="wb-slider-value">5600K</span>
                            </div>
                        </div>
                        <div class="slider-markers">
                            <span class="marker" data-temp="2500">2.5K</span>
                            <span class="marker" data-temp="3200">3.2K</span>
                            <span class="marker" data-temp="5600">5.6K</span>
                            <span class="marker" data-temp="6500">6.5K</span>
                            <span class="marker" data-temp="10000">10K</span>
                        </div>
                    </div>
                    
                    <!-- Named Presets -->
                    <div class="wb-named-presets">
                        <button type="button" class="wb-preset-btn" data-wb="2800" data-name="–í–æ–ª—å—Ñ—Ä–∞–º" disabled>
                            <span class="preset-icon">üî•</span>
                            <span class="preset-name">–í–æ–ª—å—Ñ—Ä–∞–º</span>
                            <span class="preset-value">2800K</span>
                        </button>
                        <button type="button" class="wb-preset-btn" data-wb="3200" data-name="–ì–∞–ª–æ–≥–µ–Ω" disabled>
                            <span class="preset-icon">üí°</span>
                            <span class="preset-name">–ì–∞–ª–æ–≥–µ–Ω</span>
                            <span class="preset-value">3200K</span>
                        </button>
                        <button type="button" class="wb-preset-btn" data-wb="4300" data-name="–§–ª—É–æ—Ä–µ—Å—Ü–µ–Ω—Ç" disabled>
                            <span class="preset-icon">üîÜ</span>
                            <span class="preset-name">–§–ª—É–æ—Ä–µ—Å—Ü–µ–Ω—Ç</span>
                            <span class="preset-value">4300K</span>
                        </button>
                        <button type="button" class="wb-preset-btn" data-wb="5600" data-name="–î–µ–Ω–Ω–µ —Å–≤—ñ—Ç–ª–æ" disabled>
                            <span class="preset-icon">‚òÄÔ∏è</span>
                            <span class="preset-name">–î–µ–Ω–Ω–µ —Å–≤—ñ—Ç–ª–æ</span>
                            <span class="preset-value">5600K</span>
                        </button>
                        <button type="button" class="wb-preset-btn" data-wb="6500" data-name="–•–º–∞—Ä–Ω–æ" disabled>
                            <span class="preset-icon">‚òÅÔ∏è</span>
                            <span class="preset-name">–•–º–∞—Ä–Ω–æ</span>
                            <span class="preset-value">6500K</span>
                        </button>
                        <button type="button" class="wb-preset-btn" data-wb="7500" data-name="–¢—ñ–Ω—å" disabled>
                            <span class="preset-icon">üå≥</span>
                            <span class="preset-name">–¢—ñ–Ω—å</span>
                            <span class="preset-value">7500K</span>
                        </button>
                    </div>
                    
                    <!-- Quick Adjustment -->
                    <div class="wb-quick-adjust">
                        <button type="button" class="wb-adjust-btn" data-adjust="-200" disabled>
                            <span class="adjust-icon">üîµ</span>
                            <span class="adjust-text">-200K</span>
                        </button>
                        <button type="button" class="wb-adjust-btn" data-adjust="-100" disabled>
                            <span class="adjust-icon">üî∑</span>
                            <span class="adjust-text">-100K</span>
                        </button>
                        <button type="button" class="wb-adjust-btn" data-adjust="+100" disabled>
                            <span class="adjust-icon">üî∂</span>
                            <span class="adjust-text">+100K</span>
                        </button>
                        <button type="button" class="wb-adjust-btn" data-adjust="+200" disabled>
                            <span class="adjust-icon">üî¥</span>
                            <span class="adjust-text">+200K</span>
                        </button>
                    </div>
                    
                    <!-- Custom Input -->
                    <div class="custom-control">
                        <input type="number" id="custom-wb" min="2500" max="10000" step="100" value="5600" disabled>
                        <button type="button" id="set-custom-wb-btn" class="btn secondary" disabled>–í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏</button>
                    </div>
                </div>
            </div>

            <!-- Focus Control -->
            <div class="control-panel">

                <!-- Focus -->
                <div class="control-section">
                    <h3>üéØ Focus</h3>
                    <div class="current-value">
                        <span>–ü–æ—Ç–æ—á–Ω–∏–π focus: </span>
                        <span class="value-display" id="current-focus">‚ùì</span>
                    </div>
                    <div class="focus-controls">
                        <button type="button" id="focus-near-btn" class="btn secondary" disabled>Near</button>
                        <button type="button" id="focus-auto-btn" class="btn primary" disabled>Auto Focus</button>
                        <button type="button" id="focus-far-btn" class="btn secondary" disabled>Far</button>
                    </div>
                    <div class="focus-slider-control">
                        <input type="range" id="focus-slider" min="0" max="1" step="0.01" value="0.5" disabled>
                    </div>
                </div>
            </div>

            <!-- Tint Control -->
            <div class="control-panel">

                <!-- Tint -->
                <div class="control-section">
                    <h3>üåà Tint</h3>
                    <div class="current-value">
                        <span>–ü–æ—Ç–æ—á–Ω–∏–π tint: </span>
                        <span class="value-display" id="current-tint">‚ùì</span>
                    </div>
                    <div class="tint-control">
                        <input type="range" id="tint-slider" min="-50" max="50" value="0" disabled>
                        <span class="range-value" id="tint-value">0</span>
                    </div>
                </div>

                <!-- Iris (Aperture) -->
                <div class="control-section">
                    <h3>üìê Iris (F-stop)</h3>
                    <div class="current-value">
                        <span>–ü–æ—Ç–æ—á–Ω–∞ –¥—ñ–∞—Ñ—Ä–∞–≥–º–∞: </span>
                        <span class="value-display" id="current-iris">‚ùì</span>
                    </div>
                    <div class="iris-presets">
                        <button type="button" class="iris-btn" data-iris="1.4" disabled>f/1.4</button>
                        <button type="button" class="iris-btn" data-iris="2.0" disabled>f/2.0</button>
                        <button type="button" class="iris-btn" data-iris="2.8" disabled>f/2.8</button>
                        <button type="button" class="iris-btn" data-iris="4.0" disabled>f/4.0</button>
                        <button type="button" class="iris-btn" data-iris="5.6" disabled>f/5.6</button>
                        <button type="button" class="iris-btn" data-iris="8.0" disabled>f/8.0</button>
                        <button type="button" class="iris-btn" data-iris="11" disabled>f/11</button>
                        <button type="button" class="iris-btn" data-iris="16" disabled>f/16</button>
                    </div>
                    <div class="custom-control">
                        <input type="number" id="custom-iris" min="1.4" max="22" step="0.1" value="2.8" disabled>
                        <button type="button" id="set-custom-iris-btn" class="btn secondary" disabled>–í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏</button>
                    </div>
                </div>
            </div>

        </div>
        </div>

        <!-- Color Controls Tab - ATEM Style Professional Interface -->
        <div id="color-tab" class="tab-content">
            <div class="atem-color-container">
                <div class="control-panel">
                    <div class="panel-header">
                        <h2>–ö–µ—Ä—É–≤–∞–Ω–Ω—è –∫–æ–ª—å–æ—Ä–æ–º</h2>
                    </div>
                    <div class="control-section">
                        <p>–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –∫–µ—Ä—É–≤–∞–Ω–Ω—è –∫–æ–ª—å–æ—Ä–æ–º –±—É–¥–µ –¥–æ–¥–∞–Ω–æ –Ω–µ–∑–∞–±–∞—Ä–æ–º...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Presets Tab -->
        <div id="presets-tab" class="tab-content">
            <div class="presets-modern-container">
                <!-- Header with Stats -->
                <div class="presets-header">
                    <div class="presets-title">
                        <h2>üíæ –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø—Ä–µ—Å–µ—Ç–∞–º–∏</h2>
                        <div class="presets-stats">
                            <span id="presets-count">0 –ø—Ä–µ—Å–µ—Ç—ñ–≤</span>
                            <span id="active-preset-indicator">‚Ä¢ –ê–∫—Ç–∏–≤–Ω–∏–π: <span id="current-preset-name">–ù–µ–º–∞—î</span></span>
                        </div>
                    </div>
                    <div class="presets-toolbar">
                        <button type="button" id="refresh-presets-btn" class="btn-modern secondary" disabled>
                            <span class="btn-icon">ÔøΩ</span>
                            <span class="btn-text">–û–Ω–æ–≤–∏—Ç–∏</span>
                        </button>
                    </div>
                </div>

                <!-- Quick Actions Bar -->
                <div class="presets-quick-actions">
                    <div class="quick-action-card">
                        <div class="action-header">
                            <span class="action-icon">‚ûï</span>
                            <span class="action-title">–ù–æ–≤–∏–π –ø—Ä–µ—Å–µ—Ç</span>
                        </div>
                        <div class="action-content">
                            <div class="input-modern">
                                <input type="text" id="new-preset-name" placeholder="–ù–∞–∑–≤–∞ –ø—Ä–µ—Å–µ—Ç—É..." disabled>
                            </div>
                            <button type="button" id="save-preset-btn" class="btn-modern success" disabled>
                                <span class="btn-icon">üíæ</span>
                                <span class="btn-text">–ó–±–µ—Ä–µ–≥—Ç–∏</span>
                            </button>
                        </div>
                    </div>

                    <div class="quick-action-card">
                        <div class="action-header">
                            <span class="action-icon">üìÅ</span>
                            <span class="action-title">–Ü–º–ø–æ—Ä—Ç —Ñ–∞–π–ª—É</span>
                        </div>
                        <div class="action-content">
                            <input type="file" id="preset-file-input" accept=".preset" style="display: none;" disabled>
                            <button type="button" id="upload-preset-btn" class="btn-modern secondary full-width" disabled>
                                <span class="btn-icon">ÔøΩ</span>
                                <span class="btn-text">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ .preset —Ñ–∞–π–ª</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Presets Grid -->
                <div class="presets-grid-container">
                    <div class="presets-grid-header">
                        <h3>üìÇ –ó–±–µ—Ä–µ–∂–µ–Ω—ñ –ø—Ä–µ—Å–µ—Ç–∏</h3>
                        <div class="view-options">
                            <button type="button" class="view-btn active" data-view="grid" title="–°—ñ—Ç–∫–∞">
                                <span>‚öè</span>
                            </button>
                            <button type="button" class="view-btn" data-view="list" title="–°–ø–∏—Å–æ–∫">
                                <span>‚ò∞</span>
                            </button>
                        </div>
                    </div>
                    
                    <div id="preset-list" class="presets-grid">
                        <div class="preset-card loading">
                            <div class="preset-card-content">
                                <div class="preset-loading-animation"></div>
                                <span>–ù–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ –¥–æ –∫–∞–º–µ—Ä–∏</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Status Bar -->
                <div class="presets-status-bar">
                    <div class="status-info">
                        <span class="status-dot"></span>
                        <span id="presets-status-text">–û—á—ñ–∫—É–≤–∞–Ω–Ω—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è...</span>
                    </div>
                    <div class="status-actions">
                        <button type="button" class="btn-link" id="refresh-data-btn">üîÑ –û–Ω–æ–≤–∏—Ç–∏ –¥–∞–Ω—ñ</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- MIDI Controls Tab -->
        <div id="midi-tab" class="tab-content">
            <div class="midi-container">
                
                <!-- MIDI Header -->
                <div class="midi-header">
                    <h2>üéπ MIDI –ö–æ–Ω—Ç—Ä–æ–ª—å</h2>
                    <div class="midi-status">
                        <div class="midi-indicator offline" id="midi-status-dot"></div>
                        <span id="midi-status-text">MIDI –≤—ñ–¥–∫–ª—é—á–µ–Ω–æ</span>
                    </div>
                </div>

                <!-- MIDI Connection Panel -->
                <div class="midi-connection-panel">
                    <div class="midi-connection-header">
                        <h3>üîå –î–æ—Å—Ç—É–ø–Ω—ñ MIDI –ø—Ä–∏—Å—Ç—Ä–æ—ó</h3>
                        <button type="button" class="btn secondary compact" id="midi-refresh-btn">üîÑ –û–Ω–æ–≤–∏—Ç–∏</button>
                    </div>
                    <div class="midi-devices-grid" id="midi-devices-grid">
                        <div class="midi-device-placeholder">
                            <div class="placeholder-icon">üéπ</div>
                            <div class="placeholder-text">–ü–æ—à—É–∫ MIDI –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤...</div>
                        </div>
                    </div>
                    <div class="midi-connection-actions">
                        <button type="button" class="btn danger" id="midi-disconnect-btn" disabled>–í—ñ–¥–∫–ª—é—á–∏—Ç–∏ –∞–∫—Ç–∏–≤–Ω–∏–π –ø—Ä–∏—Å—Ç—Ä—ñ–π</button>
                    </div>
                </div>

                <!-- MIDI Mappings Grid -->
                <div class="midi-mappings-grid">
                    
                    <!-- Camera Controls Mappings -->
                    <div class="midi-mapping-panel">
                        <h3>üìπ –ö–µ—Ä—É–≤–∞–Ω–Ω—è –∫–∞–º–µ—Ä–æ—é</h3>
                        <div class="midi-mapping-list">
                            <div class="midi-mapping-item">
                                <label>–ó–∞–ø–∏—Å ON/OFF</label>
                                <button type="button" class="midi-assign-btn" data-function="record">–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏</button>
                                <span class="midi-cc-display" id="midi-record-cc">‚Äî</span>
                                <button type="button" class="midi-clear-btn" data-function="record">√ó</button>
                            </div>
                            <div class="midi-mapping-item">
                                <label>Gain</label>
                                <button type="button" class="midi-assign-btn" data-function="gain">–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏</button>
                                <span class="midi-cc-display" id="midi-gain-cc">‚Äî</span>
                                <button type="button" class="midi-clear-btn" data-function="gain">√ó</button>
                            </div>
                            <div class="midi-mapping-item">
                                <label>Shutter</label>
                                <button type="button" class="midi-assign-btn" data-function="shutter">–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏</button>
                                <span class="midi-cc-display" id="midi-shutter-cc">‚Äî</span>
                                <button type="button" class="midi-clear-btn" data-function="shutter">√ó</button>
                            </div>
                            <div class="midi-mapping-item">
                                <label>White Balance</label>
                                <button type="button" class="midi-assign-btn" data-function="whiteBalance">–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏</button>
                                <span class="midi-cc-display" id="midi-whiteBalance-cc">‚Äî</span>
                                <button type="button" class="midi-clear-btn" data-function="whiteBalance">√ó</button>
                            </div>
                            <div class="midi-mapping-item">
                                <label>Tint</label>
                                <button type="button" class="midi-assign-btn" data-function="tint">–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏</button>
                                <span class="midi-cc-display" id="midi-tint-cc">‚Äî</span>
                                <button type="button" class="midi-clear-btn" data-function="tint">√ó</button>
                            </div>
                            <div class="midi-mapping-item">
                                <label>Focus</label>
                                <button type="button" class="midi-assign-btn" data-function="focus">–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏</button>
                                <span class="midi-cc-display" id="midi-focus-cc">‚Äî</span>
                                <button type="button" class="midi-clear-btn" data-function="focus">√ó</button>
                            </div>
                            <div class="midi-mapping-item">
                                <label>Iris</label>
                                <button type="button" class="midi-assign-btn" data-function="iris">–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏</button>
                                <span class="midi-cc-display" id="midi-iris-cc">‚Äî</span>
                                <button type="button" class="midi-clear-btn" data-function="iris">√ó</button>
                            </div>
                        </div>
                    </div>

                    <!-- Color Correction Mappings -->
                    <div class="midi-mapping-panel">
                        <h3>üé® –ö–æ—Ä–µ–∫—Ü—ñ—è –∫–æ–ª—å–æ—Ä—É</h3>
                        <div class="midi-mapping-list">
                            <div class="midi-mapping-item">
                                <label>Lift Red</label>
                                <button type="button" class="midi-assign-btn" data-function="liftRed">–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏</button>
                                <span class="midi-cc-display" id="midi-liftRed-cc">‚Äî</span>
                                <button type="button" class="midi-clear-btn" data-function="liftRed">√ó</button>
                            </div>
                            <div class="midi-mapping-item">
                                <label>Gamma Green</label>
                                <button type="button" class="midi-assign-btn" data-function="gammaGreen">–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏</button>
                                <span class="midi-cc-display" id="midi-gammaGreen-cc">‚Äî</span>
                                <button type="button" class="midi-clear-btn" data-function="gammaGreen">√ó</button>
                            </div>
                            <div class="midi-mapping-item">
                                <label>Gain Blue</label>
                                <button type="button" class="midi-assign-btn" data-function="gainBlue">–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏</button>
                                <span class="midi-cc-display" id="midi-gainBlue-cc">‚Äî</span>
                                <button type="button" class="midi-clear-btn" data-function="gainBlue">√ó</button>
                            </div>
                            <div class="midi-mapping-item">
                                <label>Contrast</label>
                                <button type="button" class="midi-assign-btn" data-function="contrast">–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏</button>
                                <span class="midi-cc-display" id="midi-contrast-cc">‚Äî</span>
                                <button type="button" class="midi-clear-btn" data-function="contrast">√ó</button>
                            </div>
                            <div class="midi-mapping-item">
                                <label>Saturation</label>
                                <button type="button" class="midi-assign-btn" data-function="saturation">–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏</button>
                                <span class="midi-cc-display" id="midi-saturation-cc">‚Äî</span>
                                <button type="button" class="midi-clear-btn" data-function="saturation">√ó</button>
                            </div>
                        </div>
                    </div>

                    <!-- Camera Light Controls Mappings -->
                    <div class="midi-mapping-panel">
                        <h3>üí° –ö–µ—Ä—É–≤–∞–Ω–Ω—è —Å–≤—ñ—Ç–ª–∞ –∫–∞–º–µ—Ä–∏</h3>
                        <div class="midi-mapping-list">
                            <div class="midi-mapping-item">
                                <label>0 dB</label>
                                <button type="button" class="midi-assign-btn" data-function="light0db">–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏</button>
                                <span class="midi-cc-display" id="midi-light0db-cc">‚Äî</span>
                                <button type="button" class="midi-clear-btn" data-function="light0db">√ó</button>
                            </div>
                            <div class="midi-mapping-item">
                                <label>2 dB</label>
                                <button type="button" class="midi-assign-btn" data-function="light2db">–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏</button>
                                <span class="midi-cc-display" id="midi-light2db-cc">‚Äî</span>
                                <button type="button" class="midi-clear-btn" data-function="light2db">√ó</button>
                            </div>
                            <div class="midi-mapping-item">
                                <label>4 dB</label>
                                <button type="button" class="midi-assign-btn" data-function="light4db">–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏</button>
                                <span class="midi-cc-display" id="midi-light4db-cc">‚Äî</span>
                                <button type="button" class="midi-clear-btn" data-function="light4db">√ó</button>
                            </div>
                            <div class="midi-mapping-item">
                                <label>6 dB</label>
                                <button type="button" class="midi-assign-btn" data-function="light6db">–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏</button>
                                <span class="midi-cc-display" id="midi-light6db-cc">‚Äî</span>
                                <button type="button" class="midi-clear-btn" data-function="light6db">√ó</button>
                            </div>
                            <div class="midi-mapping-item">
                                <label>8 dB</label>
                                <button type="button" class="midi-assign-btn" data-function="light8db">–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏</button>
                                <span class="midi-cc-display" id="midi-light8db-cc">‚Äî</span>
                                <button type="button" class="midi-clear-btn" data-function="light8db">√ó</button>
                            </div>
                            <div class="midi-mapping-item">
                                <label>10 dB</label>
                                <button type="button" class="midi-assign-btn" data-function="light10db">–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏</button>
                                <span class="midi-cc-display" id="midi-light10db-cc">‚Äî</span>
                                <button type="button" class="midi-clear-btn" data-function="light10db">√ó</button>
                            </div>
                            <div class="midi-mapping-item">
                                <label>12 dB</label>
                                <button type="button" class="midi-assign-btn" data-function="light12db">–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏</button>
                                <span class="midi-cc-display" id="midi-light12db-cc">‚Äî</span>
                                <button type="button" class="midi-clear-btn" data-function="light12db">√ó</button>
                            </div>
                            <div class="midi-mapping-item">
                                <label>14 dB</label>
                                <button type="button" class="midi-assign-btn" data-function="light14db">–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏</button>
                                <span class="midi-cc-display" id="midi-light14db-cc">‚Äî</span>
                                <button type="button" class="midi-clear-btn" data-function="light14db">√ó</button>
                            </div>
                            <div class="midi-mapping-item">
                                <label>16 dB</label>
                                <button type="button" class="midi-assign-btn" data-function="light16db">–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏</button>
                                <span class="midi-cc-display" id="midi-light16db-cc">‚Äî</span>
                                <button type="button" class="midi-clear-btn" data-function="light16db">√ó</button>
                            </div>
                            <div class="midi-mapping-item">
                                <label>18 dB</label>
                                <button type="button" class="midi-assign-btn" data-function="light18db">–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏</button>
                                <span class="midi-cc-display" id="midi-light18db-cc">‚Äî</span>
                                <button type="button" class="midi-clear-btn" data-function="light18db">√ó</button>
                            </div>
                            <div class="midi-mapping-item">
                                <label>20 dB</label>
                                <button type="button" class="midi-assign-btn" data-function="light20db">–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏</button>
                                <span class="midi-cc-display" id="midi-light20db-cc">‚Äî</span>
                                <button type="button" class="midi-clear-btn" data-function="light20db">√ó</button>
                            </div>
                            <div class="midi-mapping-item">
                                <label>22 dB</label>
                                <button type="button" class="midi-assign-btn" data-function="light22db">–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏</button>
                                <span class="midi-cc-display" id="midi-light22db-cc">‚Äî</span>
                                <button type="button" class="midi-clear-btn" data-function="light22db">√ó</button>
                            </div>
                            <div class="midi-mapping-item">
                                <label>24 dB</label>
                                <button type="button" class="midi-assign-btn" data-function="light24db">–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏</button>
                                <span class="midi-cc-display" id="midi-light24db-cc">‚Äî</span>
                                <button type="button" class="midi-clear-btn" data-function="light24db">√ó</button>
                            </div>
                            <div class="midi-mapping-item">
                                <label>26 dB</label>
                                <button type="button" class="midi-assign-btn" data-function="light26db">–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏</button>
                                <span class="midi-cc-display" id="midi-light26db-cc">‚Äî</span>
                                <button type="button" class="midi-clear-btn" data-function="light26db">√ó</button>
                            </div>
                        </div>
                    </div>
                    
                </div>

                <!-- MIDI Settings Panel -->
                <div class="midi-settings-panel">
                    <h3>‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</h3>
                    <div class="midi-settings-content">
                        <div class="midi-setting-item">
                            <label>–ö–∞–Ω–∞–ª MIDI:</label>
                            <select class="midi-select" id="midi-channel-select">
                                <option value="0">–í—Å—ñ –∫–∞–Ω–∞–ª–∏</option>
                                <option value="1">–ö–∞–Ω–∞–ª 1</option>
                                <option value="2">–ö–∞–Ω–∞–ª 2</option>
                                <option value="3">–ö–∞–Ω–∞–ª 3</option>
                                <option value="4">–ö–∞–Ω–∞–ª 4</option>
                                <option value="5">–ö–∞–Ω–∞–ª 5</option>
                                <option value="6">–ö–∞–Ω–∞–ª 6</option>
                                <option value="7">–ö–∞–Ω–∞–ª 7</option>
                                <option value="8">–ö–∞–Ω–∞–ª 8</option>
                                <option value="9">–ö–∞–Ω–∞–ª 9</option>
                                <option value="10">–ö–∞–Ω–∞–ª 10</option>
                                <option value="11">–ö–∞–Ω–∞–ª 11</option>
                                <option value="12">–ö–∞–Ω–∞–ª 12</option>
                                <option value="13">–ö–∞–Ω–∞–ª 13</option>
                                <option value="14">–ö–∞–Ω–∞–ª 14</option>
                                <option value="15">–ö–∞–Ω–∞–ª 15</option>
                                <option value="16">–ö–∞–Ω–∞–ª 16</option>
                            </select>
                        </div>
                        <div class="midi-setting-item">
                            <label>–®–≤–∏–¥–∫—ñ—Å—Ç—å –≤—ñ–¥–≥—É–∫—É:</label>
                            <select class="midi-select" id="midi-sensitivity-select">
                                <option value="low">–ù–∏–∑—å–∫–∞</option>
                                <option value="medium" selected>–°–µ—Ä–µ–¥–Ω—è</option>
                                <option value="high">–í–∏—Å–æ–∫–∞</option>
                            </select>
                        </div>
                        <div class="midi-setting-item">
                            <input type="checkbox" id="midi-learn-mode" class="midi-checkbox">
                            <label for="midi-learn-mode">–†–µ–∂–∏–º –Ω–∞–≤—á–∞–Ω–Ω—è</label>
                            <div class="midi-help-text">–£–≤—ñ–º–∫–Ω—É—Ç–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è MIDI –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä—ñ–≤</div>
                        </div>
                        <div class="midi-actions">
                            <button type="button" class="btn secondary" id="midi-clear-all-btn">–û—á–∏—Å—Ç–∏—Ç–∏ –≤—Å—ñ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è</button>
                            <button type="button" class="btn primary" id="midi-save-settings-btn">–ó–±–µ—Ä–µ–≥—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</button>
                        </div>
                        
                        <!-- –ï–∫—Å–ø–æ—Ä—Ç/–Ü–º–ø–æ—Ä—Ç -->
                        <div class="midi-setting-group">
                            <h4>üìÇ –†–µ–∑–µ—Ä–≤–Ω–∞ –∫–æ–ø—ñ—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å</h4>
                            <div class="midi-backup-actions">
                                <button type="button" class="btn success" id="midi-export-btn">
                                    <span class="btn-icon">üíæ</span>
                                    <span class="btn-text">–ï–∫—Å–ø–æ—Ä—Ç –≤ —Ñ–∞–π–ª</span>
                                </button>
                                <button type="button" class="btn info" id="midi-import-btn">
                                    <span class="btn-icon">üìÅ</span>
                                    <span class="btn-text">–Ü–º–ø–æ—Ä—Ç –∑ —Ñ–∞–π–ª—É</span>
                                </button>
                            </div>
                            <div class="midi-help-text">
                                <small>üí° –ï–∫—Å–ø–æ—Ä—Ç—É–π—Ç–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å—É –Ω–∞ —ñ–Ω—à–∏–π –∫–æ–º–ø'—é—Ç–µ—Ä</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- MIDI Custom Buttons Panel -->
                <div class="midi-custom-container">
                    <div class="midi-custom-header">
                        <h3 class="midi-custom-title">üéõÔ∏è –ö–∞—Å—Ç–æ–º–Ω—ñ –∫–Ω–æ–ø–∫–∏</h3>
                        <div class="midi-custom-actions">
                            <button type="button" class="btn secondary compact" id="midi-add-custom-btn">
                                ‚ûï –î–æ–¥–∞—Ç–∏ –∫–Ω–æ–ø–∫—É
                            </button>
                            <button type="button" class="btn secondary compact" id="midi-import-custom-btn">
                                üìÅ –Ü–º–ø–æ—Ä—Ç
                            </button>
                            <button type="button" class="btn secondary compact" id="midi-export-custom-btn">
                                üíæ –ï–∫—Å–ø–æ—Ä—Ç
                            </button>
                        </div>
                    </div>
                    
                    <div class="midi-custom-grid" id="midi-custom-grid">
                        <!-- Custom buttons will be rendered here -->
                        <div class="midi-custom-empty" id="midi-custom-empty">
                            <div class="midi-custom-empty-icon">üéõÔ∏è</div>
                            <div>–ü–æ–∫–∏ —â–æ –Ω–µ–º–∞—î –∫–∞—Å—Ç–æ–º–Ω–∏—Ö –∫–Ω–æ–ø–æ–∫</div>
                            <small>–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–î–æ–¥–∞—Ç–∏ –∫–Ω–æ–ø–∫—É" –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–µ—Ä—à–æ—ó –∫–∞—Å—Ç–æ–º–Ω–æ—ó –∫–Ω–æ–ø–∫–∏</small>
                        </div>
                    </div>
                </div>

                <!-- MIDI Activity Panel -->
                <div class="midi-activity-panel">
                    <h3>üìä –ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å MIDI</h3>
                    <div class="midi-activity-log" id="midi-activity-log">
                        <div class="midi-log-entry">MIDI —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –¥–æ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è...</div>
                    </div>
                </div>
                
            </div>
        </div>

    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- MIDI Custom Button Modal -->
    <div class="midi-custom-modal" id="midi-custom-modal">
        <div class="midi-custom-modal-content">
            <div class="midi-custom-modal-header">
                <h3 class="midi-custom-modal-title" id="midi-custom-modal-title">–î–æ–¥–∞—Ç–∏ –∫–∞—Å—Ç–æ–º–Ω—É –∫–Ω–æ–ø–∫—É</h3>
                <button type="button" class="midi-custom-modal-close" id="midi-custom-modal-close">√ó</button>
            </div>
            
            <form id="midi-custom-form">
                <div class="midi-custom-form-group">
                    <label class="midi-custom-form-label" for="midi-custom-name">–ù–∞–∑–≤–∞ –∫–Ω–æ–ø–∫–∏</label>
                    <input type="text" id="midi-custom-name" class="midi-custom-form-input" 
                           placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: –ó–±—ñ–ª—å—à–∏—Ç–∏ —è—Å–∫—Ä–∞–≤—ñ—Å—Ç—å" required>
                    <div class="midi-custom-form-help">–ö–æ—Ä–æ—Ç–∫–∞ –Ω–∞–∑–≤–∞ –¥–ª—è —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –∫–Ω–æ–ø–∫–∏</div>
                </div>
                
                <div class="midi-custom-form-group">
                    <label class="midi-custom-form-label" for="midi-custom-function">–§—É–Ω–∫—Ü—ñ—è –∫–∞–º–µ—Ä–∏</label>
                    <select id="midi-custom-function" class="midi-custom-form-select" required>
                        <option value="">–û–±–µ—Ä—ñ—Ç—å —Ñ—É–Ω–∫—Ü—ñ—é...</option>
                        <option value="gain">Gain (ISO)</option>
                        <option value="iris">Iris (–î—ñ–∞—Ñ—Ä–∞–≥–º–∞)</option>
                        <option value="shutter">Shutter (–í–∏—Ç—Ä–∏–º–∫–∞)</option>
                        <option value="whiteBalance">White Balance</option>
                        <option value="tint">Tint</option>
                        <option value="focus">Focus</option>
                        <option value="record">–ó–∞–ø–∏—Å ON/OFF</option>
                        <option value="liftRed">Lift Red</option>
                        <option value="liftGreen">Lift Green</option>
                        <option value="liftBlue">Lift Blue</option>
                        <option value="gammaRed">Gamma Red</option>
                        <option value="gammaGreen">Gamma Green</option>
                        <option value="gammaBlue">Gamma Blue</option>
                        <option value="gainRed">Gain Red</option>
                        <option value="gainGreen">Gain Green</option>
                        <option value="gainBlue">Gain Blue</option>
                        <option value="contrast">Contrast</option>
                        <option value="saturation">Saturation</option>
                    </select>
                    <div class="midi-custom-form-help">–í–∏–±–µ—Ä—ñ—Ç—å —Ñ—É–Ω–∫—Ü—ñ—é –∫–∞–º–µ—Ä–∏, —è–∫—É –±—É–¥–µ –∫–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏ —Ü—è –∫–Ω–æ–ø–∫–∞</div>
                </div>
                
                <div class="midi-custom-form-group">
                    <label class="midi-custom-form-label" for="midi-custom-value">–ó–Ω–∞—á–µ–Ω–Ω—è</label>
                    <input type="number" id="midi-custom-value" class="midi-custom-form-input" 
                           placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: 4200 –¥–ª—è WB" step="1">
                    <div class="midi-custom-form-help">–§—ñ–∫—Å–æ–≤–∞–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è (–¥–ª—è WB: 2500-10000K, –¥–ª—è Gain: 100-25600 ISO) –∞–±–æ –∑–∞–ª–∏—à—Ç–µ –ø–æ—Ä–æ–∂–Ω—ñ–º –¥–ª—è –∑–º—ñ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∞</div>
                </div>
                
                <div class="midi-custom-assign-panel">
                    <div class="midi-custom-form-group">
                        <label class="midi-custom-form-label">MIDI –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è</label>
                        <button type="button" class="btn primary compact" id="midi-custom-assign-btn">
                            üéπ –ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏ MIDI
                        </button>
                        <div class="midi-custom-assign-status" id="midi-custom-assign-status">
                            –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏ MIDI" —ñ —Ä—É—Ö–∞–π—Ç–µ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–æ–º
                        </div>
                    </div>
                    
                    <div class="midi-custom-cc-info" id="midi-custom-cc-info">
                        <div class="midi-custom-form-label">–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–æ:</div>
                        <div class="midi-custom-cc-display" id="midi-custom-cc-display">CC 1</div>
                    </div>
                </div>
                
                <div class="midi-custom-modal-actions">
                    <button type="button" class="btn danger" id="midi-custom-delete-btn" style="display: none;">
                        –í–∏–¥–∞–ª–∏—Ç–∏
                    </button>
                    <button type="button" class="btn secondary" id="midi-custom-cancel-btn">
                        –°–∫–∞—Å—É–≤–∞—Ç–∏
                    </button>
                    <button type="submit" class="btn primary" id="midi-custom-save-btn">
                        –ó–±–µ—Ä–µ–≥—Ç–∏
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- MIDI Learning Indicator -->
    <div class="midi-learning-indicator" id="midi-learning-indicator">
        üéπ –û—á—ñ–∫—É–≤–∞–Ω–Ω—è MIDI —Å–∏–≥–Ω–∞–ª—É...
    </div>

    <script src="js/camera-controller.js"></script>
    <script src="js/midi-controller.js"></script>
    <script src="js/pwa.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
